/*! choices.js v9.0.1 | Â© 2021 Josh Johnson | https://github.com/jshjohnson/Choices#readme */
window.Choices=function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/public/assets/scripts/",i(i.s=2)}([function(e,t,i){"use strict";var s=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)};var n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(e,t){return!1!==t.clone&&t.isMergeableObject(e)?c((i=e,Array.isArray(i)?[]:{}),e,t):e;var i}function r(e,t,i){return e.concat(t).map((function(e){return o(e,i)}))}function a(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function l(e,t){try{return t in e}catch(e){return!1}}function h(e,t,i){var s={};return i.isMergeableObject(e)&&a(e).forEach((function(t){s[t]=o(e[t],i)})),a(t).forEach((function(n){(function(e,t){return l(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,n)||(l(e,n)&&i.isMergeableObject(t[n])?s[n]=function(e,t){if(!t.customMerge)return c;var i=t.customMerge(e);return"function"==typeof i?i:c}(n,i)(e[n],t[n],i):s[n]=o(t[n],i))})),s}function c(e,t,i){(i=i||{}).arrayMerge=i.arrayMerge||r,i.isMergeableObject=i.isMergeableObject||s,i.cloneUnlessOtherwiseSpecified=o;var n=Array.isArray(t);return n===Array.isArray(e)?n?i.arrayMerge(e,t,i):h(e,t,i):o(t,i)}c.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,i){return c(e,i,t)}),{})};var d=c;e.exports=d},function(e,t,i){
/*!
 * Fuse.js v3.6.1 - Lightweight fuzzy-search (http://fusejs.io)
 * 
 * Copyright (c) 2012-2017 Kirollos Risk (http://kiro.me)
 * All Rights Reserved. Apache Software License 2.0
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 */
e.exports=function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var o=i(1),r=i(7),a=r.get,l=(r.deepValue,r.isArray),h=function(){function e(t,i){var s=i.location,n=void 0===s?0:s,o=i.distance,r=void 0===o?100:o,l=i.threshold,h=void 0===l?.6:l,c=i.maxPatternLength,d=void 0===c?32:c,u=i.caseSensitive,m=void 0!==u&&u,p=i.tokenSeparator,f=void 0===p?/ +/g:p,v=i.findAllMatches,g=void 0!==v&&v,_=i.minMatchCharLength,b=void 0===_?1:_,y=i.id,E=void 0===y?null:y,S=i.keys,I=void 0===S?[]:S,C=i.shouldSort,O=void 0===C||C,w=i.getFn,A=void 0===w?a:w,L=i.sortFn,T=void 0===L?function(e,t){return e.score-t.score}:L,x=i.tokenize,D=void 0!==x&&x,P=i.matchAllTokens,N=void 0!==P&&P,M=i.includeMatches,k=void 0!==M&&M,F=i.includeScore,K=void 0!==F&&F,j=i.verbose,B=void 0!==j&&j;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:n,distance:r,threshold:h,maxPatternLength:d,isCaseSensitive:m,tokenSeparator:f,findAllMatches:g,minMatchCharLength:b,id:E,keys:I,includeMatches:k,includeScore:K,shouldSort:O,getFn:A,sortFn:T,verbose:B,tokenize:D,matchAllTokens:N},this.setCollection(t),this._processKeys(I)}var t,i;return t=e,(i=[{key:"setCollection",value:function(e){return this.list=e,e}},{key:"_processKeys",value:function(e){if(this._keyWeights={},this._keyNames=[],e.length&&"string"==typeof e[0])for(var t=0,i=e.length;t<i;t+=1){var s=e[t];this._keyWeights[s]=1,this._keyNames.push(s)}else{for(var n=null,o=null,r=0,a=0,l=e.length;a<l;a+=1){var h=e[a];if(!h.hasOwnProperty("name"))throw new Error('Missing "name" property in key object');var c=h.name;if(this._keyNames.push(c),!h.hasOwnProperty("weight"))throw new Error('Missing "weight" property in key object');var d=h.weight;if(d<0||d>1)throw new Error('"weight" property in key must bein the range of [0, 1)');o=null==o?d:Math.max(o,d),n=null==n?d:Math.min(n,d),this._keyWeights[c]=d,r+=d}if(r>1)throw new Error("Total of weights cannot exceed 1")}}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(e,'"'));var i=this._prepareSearchers(e),s=i.tokenSearchers,n=i.fullSearcher,o=this._search(s,n);return this._computeScore(o),this.options.shouldSort&&this._sort(o),t.limit&&"number"==typeof t.limit&&(o=o.slice(0,t.limit)),this._format(o)}},{key:"_prepareSearchers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(this.options.tokenize)for(var i=e.split(this.options.tokenSeparator),s=0,n=i.length;s<n;s+=1)t.push(new o(i[s],this.options));return{tokenSearchers:t,fullSearcher:new o(e,this.options)}}},{key:"_search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=this.list,s={},n=[];if("string"==typeof i[0]){for(var o=0,r=i.length;o<r;o+=1)this._analyze({key:"",value:i[o],record:o,index:o},{resultMap:s,results:n,tokenSearchers:e,fullSearcher:t});return n}for(var a=0,l=i.length;a<l;a+=1)for(var h=i[a],c=0,d=this._keyNames.length;c<d;c+=1){var u=this._keyNames[c];this._analyze({key:u,value:this.options.getFn(h,u),record:h,index:a},{resultMap:s,results:n,tokenSearchers:e,fullSearcher:t})}return n}},{key:"_analyze",value:function(e,t){var i=this,s=e.key,n=e.arrayIndex,o=void 0===n?-1:n,r=e.value,a=e.record,h=e.index,c=t.tokenSearchers,d=void 0===c?[]:c,u=t.fullSearcher,m=t.resultMap,p=void 0===m?{}:m,f=t.results,v=void 0===f?[]:f;!function e(t,n,o,r){if(null!=n)if("string"==typeof n){var a=!1,h=-1,c=0;i._log("\nKey: ".concat(""===s?"--":s));var m=u.search(n);if(i._log('Full text: "'.concat(n,'", score: ').concat(m.score)),i.options.tokenize){for(var f=n.split(i.options.tokenSeparator),g=f.length,_=[],b=0,y=d.length;b<y;b+=1){var E=d[b];i._log('\nPattern: "'.concat(E.pattern,'"'));for(var S=!1,I=0;I<g;I+=1){var C=f[I],O=E.search(C),w={};O.isMatch?(w[C]=O.score,a=!0,S=!0,_.push(O.score)):(w[C]=1,i.options.matchAllTokens||_.push(1)),i._log('Token: "'.concat(C,'", score: ').concat(w[C]))}S&&(c+=1)}h=_[0];for(var A=_.length,L=1;L<A;L+=1)h+=_[L];h/=A,i._log("Token score average:",h)}var T=m.score;h>-1&&(T=(T+h)/2),i._log("Score average:",T);var x=!i.options.tokenize||!i.options.matchAllTokens||c>=d.length;if(i._log("\nCheck Matches: ".concat(x)),(a||m.isMatch)&&x){var D={key:s,arrayIndex:t,value:n,score:T};i.options.includeMatches&&(D.matchedIndices=m.matchedIndices);var P=p[r];P?P.output.push(D):(p[r]={item:o,output:[D]},v.push(p[r]))}}else if(l(n))for(var N=0,M=n.length;N<M;N+=1)e(N,n[N],o,r)}(o,r,a,h)}},{key:"_computeScore",value:function(e){this._log("\n\nComputing score:\n");for(var t=this._keyWeights,i=!!Object.keys(t).length,s=0,n=e.length;s<n;s+=1){for(var o=e[s],r=o.output,a=r.length,l=1,h=0;h<a;h+=1){var c=r[h],d=c.key,u=i?t[d]:1,m=0===c.score&&t&&t[d]>0?Number.EPSILON:c.score;l*=Math.pow(m,u)}o.score=l,this._log(o)}}},{key:"_sort",value:function(e){this._log("\n\nSorting...."),e.sort(this.options.sortFn)}},{key:"_format",value:function(e){var t=[];if(this.options.verbose){var i=[];this._log("\n\nOutput:\n\n",JSON.stringify(e,(function(e,t){if("object"===s(t)&&null!==t){if(-1!==i.indexOf(t))return;i.push(t)}return t}),2)),i=null}var n=[];this.options.includeMatches&&n.push((function(e,t){var i=e.output;t.matches=[];for(var s=0,n=i.length;s<n;s+=1){var o=i[s];if(0!==o.matchedIndices.length){var r={indices:o.matchedIndices,value:o.value};o.key&&(r.key=o.key),o.hasOwnProperty("arrayIndex")&&o.arrayIndex>-1&&(r.arrayIndex=o.arrayIndex),t.matches.push(r)}}})),this.options.includeScore&&n.push((function(e,t){t.score=e.score}));for(var o=0,r=e.length;o<r;o+=1){var a=e[o];if(this.options.id&&(a.item=this.options.getFn(a.item,this.options.id)[0]),n.length){for(var l={item:a.item},h=0,c=n.length;h<c;h+=1)n[h](a,l);t.push(l)}else t.push(a.item)}return t}},{key:"_log",value:function(){var e;this.options.verbose&&(e=console).log.apply(e,arguments)}}])&&n(t.prototype,i),e}();e.exports=h},function(e,t,i){function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var n=i(2),o=i(3),r=i(6),a=function(){function e(t,i){var s=i.location,n=void 0===s?0:s,o=i.distance,a=void 0===o?100:o,l=i.threshold,h=void 0===l?.6:l,c=i.maxPatternLength,d=void 0===c?32:c,u=i.isCaseSensitive,m=void 0!==u&&u,p=i.tokenSeparator,f=void 0===p?/ +/g:p,v=i.findAllMatches,g=void 0!==v&&v,_=i.minMatchCharLength,b=void 0===_?1:_,y=i.includeMatches,E=void 0!==y&&y;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={location:n,distance:a,threshold:h,maxPatternLength:d,isCaseSensitive:m,tokenSeparator:f,findAllMatches:g,includeMatches:E,minMatchCharLength:b},this.pattern=m?t:t.toLowerCase(),this.pattern.length<=d&&(this.patternAlphabet=r(this.pattern))}var t,i;return t=e,(i=[{key:"search",value:function(e){var t=this.options,i=t.isCaseSensitive,s=t.includeMatches;if(i||(e=e.toLowerCase()),this.pattern===e){var r={isMatch:!0,score:0};return s&&(r.matchedIndices=[[0,e.length-1]]),r}var a=this.options,l=a.maxPatternLength,h=a.tokenSeparator;if(this.pattern.length>l)return n(e,this.pattern,h);var c=this.options,d=c.location,u=c.distance,m=c.threshold,p=c.findAllMatches,f=c.minMatchCharLength;return o(e,this.pattern,this.patternAlphabet,{location:d,distance:u,threshold:m,findAllMatches:p,minMatchCharLength:f,includeMatches:s})}}])&&s(t.prototype,i),e}();e.exports=a},function(e,t){var i=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;e.exports=function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,n=new RegExp(t.replace(i,"\\$&").replace(s,"|")),o=e.match(n),r=!!o,a=[];if(r)for(var l=0,h=o.length;l<h;l+=1){var c=o[l];a.push([e.indexOf(c),c.length-1])}return{score:r?.5:1,isMatch:r,matchedIndices:a}}},function(e,t,i){var s=i(4),n=i(5);e.exports=function(e,t,i,o){for(var r=o.location,a=void 0===r?0:r,l=o.distance,h=void 0===l?100:l,c=o.threshold,d=void 0===c?.6:c,u=o.findAllMatches,m=void 0!==u&&u,p=o.minMatchCharLength,f=void 0===p?1:p,v=o.includeMatches,g=void 0!==v&&v,_=a,b=e.length,y=d,E=e.indexOf(t,_),S=t.length,I=[],C=0;C<b;C+=1)I[C]=0;if(-1!==E){var O=s(t,{errors:0,currentLocation:E,expectedLocation:_,distance:h});if(y=Math.min(O,y),-1!==(E=e.lastIndexOf(t,_+S))){var w=s(t,{errors:0,currentLocation:E,expectedLocation:_,distance:h});y=Math.min(w,y)}}E=-1;for(var A=[],L=1,T=S+b,x=1<<(S<=31?S-1:30),D=0;D<S;D+=1){for(var P=0,N=T;P<N;)s(t,{errors:D,currentLocation:_+N,expectedLocation:_,distance:h})<=y?P=N:T=N,N=Math.floor((T-P)/2+P);T=N;var M=Math.max(1,_-N+1),k=m?b:Math.min(_+N,b)+S,F=Array(k+2);F[k+1]=(1<<D)-1;for(var K=k;K>=M;K-=1){var j=K-1,B=i[e.charAt(j)];if(B&&(I[j]=1),F[K]=(F[K+1]<<1|1)&B,0!==D&&(F[K]|=(A[K+1]|A[K])<<1|1|A[K+1]),F[K]&x&&(L=s(t,{errors:D,currentLocation:j,expectedLocation:_,distance:h}))<=y){if(y=L,(E=j)<=_)break;M=Math.max(1,2*_-E)}}if(s(t,{errors:D+1,currentLocation:_,expectedLocation:_,distance:h})>y)break;A=F}var R={isMatch:E>=0,score:0===L?.001:L};return g&&(R.matchedIndices=n(I,f)),R}},function(e,t){e.exports=function(e,t){var i=t.errors,s=void 0===i?0:i,n=t.currentLocation,o=void 0===n?0:n,r=t.expectedLocation,a=void 0===r?0:r,l=t.distance,h=void 0===l?100:l,c=s/e.length,d=Math.abs(a-o);return h?c+d/h:d?1:c}},function(e,t){e.exports=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=[],s=-1,n=-1,o=0,r=e.length;o<r;o+=1){var a=e[o];a&&-1===s?s=o:a||-1===s||((n=o-1)-s+1>=t&&i.push([s,n]),s=-1)}return e[o-1]&&o-s>=t&&i.push([s,o-1]),i}},function(e,t){e.exports=function(e){for(var t={},i=e.length,s=0;s<i;s+=1)t[e.charAt(s)]=0;for(var n=0;n<i;n+=1)t[e.charAt(n)]|=1<<i-n-1;return t}},function(e,t){var i=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},s=function(e){return null==e?"":function(e){if("string"==typeof e)return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)},n=function(e){return"string"==typeof e},o=function(e){return"number"==typeof e};e.exports={get:function(e,t){var r=[];return function e(t,a){if(a){var l=a.indexOf("."),h=a,c=null;-1!==l&&(h=a.slice(0,l),c=a.slice(l+1));var d=t[h];if(null!=d)if(c||!n(d)&&!o(d))if(i(d))for(var u=0,m=d.length;u<m;u+=1)e(d[u],c);else c&&e(d,c);else r.push(s(d))}else r.push(t)}(e,t),r},isArray:i,isString:n,isNum:o,toString:s}}])},function(e,t,i){e.exports=i(3)},function(e,t,i){"use strict";i.r(t);var s=i(1),n=i.n(s),o=i(0),r=i.n(o);function a(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var l="function"==typeof Symbol&&Symbol.observable||"@@observable",h=function(){return Math.random().toString(36).substring(7).split("").join(".")},c={INIT:"@@redux/INIT"+h(),REPLACE:"@@redux/REPLACE"+h(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+h()}};function d(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function u(e,t,i){var s;if("function"==typeof t&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error(a(0));if("function"==typeof t&&void 0===i&&(i=t,t=void 0),void 0!==i){if("function"!=typeof i)throw new Error(a(1));return i(u)(e,t)}if("function"!=typeof e)throw new Error(a(2));var n=e,o=t,r=[],h=r,m=!1;function p(){h===r&&(h=r.slice())}function f(){if(m)throw new Error(a(3));return o}function v(e){if("function"!=typeof e)throw new Error(a(4));if(m)throw new Error(a(5));var t=!0;return p(),h.push(e),function(){if(t){if(m)throw new Error(a(6));t=!1,p();var i=h.indexOf(e);h.splice(i,1),r=null}}}function g(e){if(!d(e))throw new Error(a(7));if(void 0===e.type)throw new Error(a(8));if(m)throw new Error(a(9));try{m=!0,o=n(o,e)}finally{m=!1}for(var t=r=h,i=0;i<t.length;i++){(0,t[i])()}return e}function _(e){if("function"!=typeof e)throw new Error(a(10));n=e,g({type:c.REPLACE})}function b(){var e,t=v;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(a(11));function i(){e.next&&e.next(f())}return i(),{unsubscribe:t(i)}}})[l]=function(){return this},e}return g({type:c.INIT}),(s={dispatch:g,subscribe:v,getState:f,replaceReducer:_})[l]=b,s}const m=[];const p=[];const f=[];const v={loading:!1};var g=function(e,t){switch(void 0===e&&(e=v),t.type){case"SET_IS_LOADING":return{loading:t.isLoading};default:return e}};const _=e=>Array.from({length:e},()=>{return(e=0,t=36,Math.floor(Math.random()*(t-e)+e)).toString(36);var e,t}).join(""),b=e=>Object.prototype.toString.call(e).slice(8,-1),y=(e,t)=>null!=t&&b(t)===e,E=e=>"string"!=typeof e?e:e.replace(/&/g,"&amp;").replace(/>/g,"&rt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),S=(()=>{const e=document.createElement("div");return t=>{const i=t.trim();e.innerHTML=i;const s=e.children[0];for(;e.firstChild;)e.removeChild(e.firstChild);return s}})(),I=(e,t)=>e.score-t.score,C=e=>JSON.parse(JSON.stringify(e)),O=function(e){for(var t=Object.keys(e),i={},s=0;s<t.length;s++){var n=t[s];0,"function"==typeof e[n]&&(i[n]=e[n])}var o,r=Object.keys(i);try{!function(e){Object.keys(e).forEach((function(t){var i=e[t];if(void 0===i(void 0,{type:c.INIT}))throw new Error(a(12));if(void 0===i(void 0,{type:c.PROBE_UNKNOWN_ACTION()}))throw new Error(a(13))}))}(i)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var s=!1,n={},l=0;l<r.length;l++){var h=r[l],c=i[h],d=e[h],u=c(d,t);if(void 0===u){t&&t.type;throw new Error(a(14))}n[h]=u,s=s||u!==d}return(s=s||r.length!==Object.keys(e).length)?n:e}}({items:function(e,t){switch(void 0===e&&(e=m),t.type){case"ADD_ITEM":return[...e,{id:t.id,choiceId:t.choiceId,groupId:t.groupId,value:t.value,label:t.label,active:!0,highlighted:!1,customProperties:t.customProperties,placeholder:t.placeholder||!1,keyCode:null}].map(e=>{const t=e;return t.highlighted=!1,t});case"REMOVE_ITEM":return e.map(e=>{const i=e;return i.id===t.id&&(i.active=!1),i});case"HIGHLIGHT_ITEM":return e.map(e=>{const i=e;return i.id===t.id&&(i.highlighted=t.highlighted),i});default:return e}},groups:function(e,t){switch(void 0===e&&(e=p),t.type){case"ADD_GROUP":return[...e,{id:t.id,value:t.value,active:t.active,disabled:t.disabled}];case"CLEAR_CHOICES":return[];default:return e}},choices:function(e,t){switch(void 0===e&&(e=f),t.type){case"ADD_CHOICE":return[...e,{id:t.id,elementId:t.elementId,groupId:t.groupId,value:t.value,label:t.label||t.value,disabled:t.disabled||!1,selected:!1,active:!0,score:9999,customProperties:t.customProperties,placeholder:t.placeholder||!1,keyCode:null}];case"ADD_ITEM":return t.activateOptions?e.map(e=>{const i=e;return i.active=t.active,i}):t.choiceId>-1?e.map(e=>{const i=e;return i.id===parseInt(t.choiceId,10)&&(i.selected=!0),i}):e;case"REMOVE_ITEM":return t.choiceId>-1?e.map(e=>{const i=e;return i.id===parseInt(t.choiceId,10)&&(i.selected=!1),i}):e;case"FILTER_CHOICES":return e.map(e=>{const i=e;return i.active=t.results.some(e=>{let{item:t,score:s}=e;return t.id===i.id&&(i.score=s,!0)}),i});case"ACTIVATE_CHOICES":return e.map(e=>{const i=e;return i.active=t.active,i});case"CLEAR_CHOICES":return f;default:return e}},general:g});var w=(e,t)=>{let i=e;if("CLEAR_ALL"===t.type)i=void 0;else if("RESET_TO"===t.type)return C(t.state);return O(i,t)};class A{constructor(){this._store=u(w,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())}subscribe(e){this._store.subscribe(e)}dispatch(e){this._store.dispatch(e)}get state(){return this._store.getState()}get items(){return this.state.items}get activeItems(){return this.items.filter(e=>!0===e.active)}get highlightedActiveItems(){return this.items.filter(e=>e.active&&e.highlighted)}get choices(){return this.state.choices}get activeChoices(){return this.choices.filter(e=>!0===e.active)}get selectableChoices(){return this.choices.filter(e=>!0!==e.disabled)}get searchableChoices(){return this.selectableChoices.filter(e=>!0!==e.placeholder)}get placeholderChoice(){return[...this.choices].reverse().find(e=>!0===e.placeholder)}get groups(){return this.state.groups}get activeGroups(){const{groups:e,choices:t}=this;return e.filter(e=>{const i=!0===e.active&&!1===e.disabled,s=t.some(e=>!0===e.active&&!1===e.disabled);return i&&s},[])}isLoading(){return this.state.general.loading}getChoiceById(e){return this.activeChoices.find(t=>t.id===parseInt(e,10))}getGroupById(e){return this.groups.find(t=>t.id===e)}}class L{constructor(e){let{element:t,type:i,classNames:s}=e;this.element=t,this.classNames=s,this.type=i,this.isActive=!1}get distanceFromTopWindow(){return this.element.getBoundingClientRect().bottom}getChild(e){return this.element.querySelector(e)}show(){return this.element.classList.add(this.classNames.activeState),this.element.setAttribute("aria-expanded","true"),this.isActive=!0,this}hide(){return this.element.classList.remove(this.classNames.activeState),this.element.setAttribute("aria-expanded","false"),this.isActive=!1,this}}const T={items:[],choices:[],silent:!1,renderChoiceLimit:-1,maxItemCount:-1,addItems:!0,addItemFilter:null,removeItems:!0,removeItemButton:!1,editItems:!1,duplicateItemsAllowed:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,shouldSort:!0,shouldSortItems:!1,sorter:(e,t)=>{let{value:i,label:s=i}=e,{value:n,label:o=n}=t;return s.localeCompare(o,[],{sensitivity:"base",ignorePunctuation:!0,numeric:!0})},placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",uniqueItemText:"Only unique values can be added",customAddItemText:"Only values matching specific conditions can be added",addItemText:e=>`Press Enter to add <b>"${E(e)}"</b>`,maxItemText:e=>`Only ${e} values can be added`,valueComparer:(e,t)=>e===t,fuseOptions:{includeScore:!0},callbackOnInit:null,callbackOnCreateTemplates:null,classNames:{containerOuter:"choices",containerInner:"choices__inner",input:"choices__input",inputCloned:"choices__input--cloned",list:"choices__list",listItems:"choices__list--multiple",listSingle:"choices__list--single",listDropdown:"choices__list--dropdown",item:"choices__item",itemSelectable:"choices__item--selectable",itemDisabled:"choices__item--disabled",itemChoice:"choices__item--choice",placeholder:"choices__placeholder",group:"choices__group",groupHeading:"choices__heading",button:"choices__button",activeState:"is-active",focusState:"is-focused",openState:"is-open",disabledState:"is-disabled",highlightedState:"is-highlighted",selectedState:"is-selected",flippedState:"is-flipped",loadingState:"is-loading",noResults:"has-no-results",noChoices:"has-no-choices"}},x="showDropdown",D="hideDropdown",P="change",N="choice",M="search",k="addItem",F="removeItem",K="highlightItem",j="highlightChoice",B="ADD_CHOICE",R="FILTER_CHOICES",H="ACTIVATE_CHOICES",V="CLEAR_CHOICES",G="ADD_GROUP",Y="ADD_ITEM",q="REMOVE_ITEM",U="HIGHLIGHT_ITEM",$={BACK_KEY:46,DELETE_KEY:8,ENTER_KEY:13,A_KEY:65,ESC_KEY:27,UP_KEY:38,DOWN_KEY:40,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34};class W{constructor(e){let{element:t,type:i,classNames:s,position:n}=e;this.element=t,this.classNames=s,this.type=i,this.position=n,this.isOpen=!1,this.isFlipped=!1,this.isFocussed=!1,this.isDisabled=!1,this.isLoading=!1,this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}addEventListeners(){this.element.addEventListener("focus",this._onFocus),this.element.addEventListener("blur",this._onBlur)}removeEventListeners(){this.element.removeEventListener("focus",this._onFocus),this.element.removeEventListener("blur",this._onBlur)}shouldFlip(e){return!1}setActiveDescendant(e){this.element.setAttribute("aria-activedescendant",e)}removeActiveDescendant(){this.element.removeAttribute("aria-activedescendant")}open(e){this.element.classList.add(this.classNames.openState),this.element.setAttribute("aria-expanded","true"),this.isOpen=!0,this.shouldFlip(e)&&(this.element.classList.add(this.classNames.flippedState),this.isFlipped=!0)}close(){this.element.classList.remove(this.classNames.openState),this.element.setAttribute("aria-expanded","false"),this.removeActiveDescendant(),this.isOpen=!1,this.isFlipped&&(this.element.classList.remove(this.classNames.flippedState),this.isFlipped=!1)}focus(){this.isFocussed||this.element.focus()}addFocusState(){this.element.classList.add(this.classNames.focusState)}removeFocusState(){this.element.classList.remove(this.classNames.focusState)}enable(){this.element.classList.remove(this.classNames.disabledState),this.element.removeAttribute("aria-disabled"),"select-one"===this.type&&this.element.setAttribute("tabindex","0"),this.isDisabled=!1}disable(){this.element.classList.add(this.classNames.disabledState),this.element.setAttribute("aria-disabled","true"),"select-one"===this.type&&this.element.setAttribute("tabindex","-1"),this.isDisabled=!0}wrap(e){!function(e,t){void 0===t&&(t=document.createElement("div")),e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t.appendChild(e)}(e,this.element)}unwrap(e){this.element.parentNode.insertBefore(e,this.element),this.element.parentNode.removeChild(this.element)}addLoadingState(){this.element.classList.add(this.classNames.loadingState),this.element.setAttribute("aria-busy","true"),this.isLoading=!0}removeLoadingState(){this.element.classList.remove(this.classNames.loadingState),this.element.removeAttribute("aria-busy"),this.isLoading=!1}_onFocus(){this.isFocussed=!0}_onBlur(){this.isFocussed=!1}}class z{constructor(e){let{element:t,type:i,classNames:s,preventPaste:n}=e;this.element=t,this.type=i,this.classNames=s,this.preventPaste=n,this.isFocussed=this.element===document.activeElement,this.isDisabled=t.disabled,this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}set placeholder(e){this.element.placeholder=e}get value(){return E(this.element.value)}set value(e){this.element.value=e}addEventListeners(){this.element.addEventListener("paste",this._onPaste),this.element.addEventListener("input",this._onInput,{passive:!0}),this.element.addEventListener("focus",this._onFocus,{passive:!0}),this.element.addEventListener("blur",this._onBlur,{passive:!0})}removeEventListeners(){this.element.removeEventListener("input",this._onInput,{passive:!0}),this.element.removeEventListener("paste",this._onPaste),this.element.removeEventListener("focus",this._onFocus,{passive:!0}),this.element.removeEventListener("blur",this._onBlur,{passive:!0})}enable(){this.element.removeAttribute("disabled"),this.isDisabled=!1}disable(){this.element.setAttribute("disabled",""),this.isDisabled=!0}focus(){this.isFocussed||this.element.focus()}blur(){this.isFocussed&&this.element.blur()}clear(e){return void 0===e&&(e=!0),this.element.value&&(this.element.value=""),e&&this.setWidth(),this}setWidth(){const{style:e,value:t,placeholder:i}=this.element;e.minWidth=i.length+1+"ch",e.width=t.length+1+"ch"}setActiveDescendant(e){this.element.setAttribute("aria-activedescendant",e)}removeActiveDescendant(){this.element.removeAttribute("aria-activedescendant")}_onInput(){"select-one"!==this.type&&this.setWidth()}_onPaste(e){this.preventPaste&&e.preventDefault()}_onFocus(){this.isFocussed=!0}_onBlur(){this.isFocussed=!1}}class X{constructor(e){let{element:t}=e;this.element=t,this.scrollPos=this.element.scrollTop,this.height=this.element.offsetHeight}clear(){this.element.innerHTML=""}append(e){this.element.appendChild(e)}getChild(e){return this.element.querySelector(e)}hasChildren(){return this.element.hasChildNodes()}scrollToTop(){this.element.scrollTop=0}scrollToChildElement(e,t){if(!e)return;const i=this.element.offsetHeight,s=this.element.scrollTop+i,n=e.offsetHeight,o=e.offsetTop+n,r=t>0?this.element.scrollTop+o-s:e.offsetTop;requestAnimationFrame(()=>{this._animateScroll(r,t)})}_scrollDown(e,t,i){const s=(i-e)/t,n=s>1?s:1;this.element.scrollTop=e+n}_scrollUp(e,t,i){const s=(e-i)/t,n=s>1?s:1;this.element.scrollTop=e-n}_animateScroll(e,t){const i=this.element.scrollTop;let s=!1;t>0?(this._scrollDown(i,4,e),i<e&&(s=!0)):(this._scrollUp(i,4,e),i>e&&(s=!0)),s&&requestAnimationFrame(()=>{this._animateScroll(e,t)})}}class J{constructor(e){let{element:t,classNames:i}=e;if(this.element=t,this.classNames=i,!(t instanceof HTMLInputElement||t instanceof HTMLSelectElement))throw new TypeError("Invalid element passed");this.isDisabled=!1}get isActive(){return"active"===this.element.dataset.choice}get dir(){return this.element.dir}get value(){return this.element.value}set value(e){this.element.value=e}conceal(){this.element.classList.add(this.classNames.input),this.element.hidden=!0,this.element.tabIndex=-1;const e=this.element.getAttribute("style");e&&this.element.setAttribute("data-choice-orig-style",e),this.element.setAttribute("data-choice","active")}reveal(){this.element.classList.remove(this.classNames.input),this.element.hidden=!1,this.element.removeAttribute("tabindex");const e=this.element.getAttribute("data-choice-orig-style");e?(this.element.removeAttribute("data-choice-orig-style"),this.element.setAttribute("style",e)):this.element.removeAttribute("style"),this.element.removeAttribute("data-choice"),this.element.value=this.element.value}enable(){this.element.removeAttribute("disabled"),this.element.disabled=!1,this.isDisabled=!1}disable(){this.element.setAttribute("disabled",""),this.element.disabled=!0,this.isDisabled=!0}triggerEvent(e,t){!function(e,t,i){void 0===i&&(i=null);const s=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0});e.dispatchEvent(s)}(this.element,e,t)}}class Z extends J{constructor(e){let{element:t,classNames:i,delimiter:s}=e;super({element:t,classNames:i}),this.delimiter=s}get value(){return this.element.value}set value(e){const t=e.map(e=>{let{value:t}=e;return t}).join(this.delimiter);this.element.setAttribute("value",t),this.element.value=t}}class Q extends J{constructor(e){let{element:t,classNames:i,template:s}=e;super({element:t,classNames:i}),this.template=s}get placeholderOption(){return this.element.querySelector('option[value=""]')||this.element.querySelector("option[placeholder]")}get optionGroups(){return Array.from(this.element.getElementsByTagName("OPTGROUP"))}get options(){return Array.from(this.element.options)}set options(e){const t=document.createDocumentFragment(),i=e=>{const i=this.template(e);t.appendChild(i)};e.forEach(e=>i(e)),this.appendDocFragment(t)}appendDocFragment(e){this.element.innerHTML="",this.element.appendChild(e)}}const ee={containerOuter(e,t,i,s,n,o){let{containerOuter:r}=e;const a=Object.assign(document.createElement("div"),{className:r});return a.dataset.type=o,t&&(a.dir=t),s&&(a.tabIndex=0),i&&(a.setAttribute("role",n?"combobox":"listbox"),n&&a.setAttribute("aria-autocomplete","list")),a.setAttribute("aria-haspopup","true"),a.setAttribute("aria-expanded","false"),a},containerInner(e){let{containerInner:t}=e;return Object.assign(document.createElement("div"),{className:t})},itemList(e,t){let{list:i,listSingle:s,listItems:n}=e;return Object.assign(document.createElement("div"),{className:`${i} ${t?s:n}`})},placeholder(e,t){let{placeholder:i}=e;return Object.assign(document.createElement("div"),{className:i,innerHTML:t})},item(e,t,i){let{item:s,button:n,highlightedState:o,itemSelectable:r,placeholder:a}=e,{id:l,value:h,label:c,customProperties:d,active:u,disabled:m,highlighted:p,placeholder:f}=t;const v=Object.assign(document.createElement("div"),{className:s,innerHTML:c});if(Object.assign(v.dataset,{item:"",id:l,value:h,customProperties:d}),u&&v.setAttribute("aria-selected","true"),m&&v.setAttribute("aria-disabled","true"),f&&v.classList.add(a),v.classList.add(p?o:r),i){m&&v.classList.remove(r),v.dataset.deletable="";const e="Remove item",t=Object.assign(document.createElement("button"),{type:"button",className:n,innerHTML:e});t.setAttribute("aria-label",`${e}: '${h}'`),t.dataset.button="",v.appendChild(t)}return v},choiceList(e,t){let{list:i}=e;const s=Object.assign(document.createElement("div"),{className:i});return t||s.setAttribute("aria-multiselectable","true"),s.setAttribute("role","listbox"),s},choiceGroup(e,t){let{group:i,groupHeading:s,itemDisabled:n}=e,{id:o,value:r,disabled:a}=t;const l=Object.assign(document.createElement("div"),{className:`${i} ${a?n:""}`});return l.setAttribute("role","group"),Object.assign(l.dataset,{group:"",id:o,value:r}),a&&l.setAttribute("aria-disabled","true"),l.appendChild(Object.assign(document.createElement("div"),{className:s,innerHTML:r})),l},choice(e,t,i){let{item:s,itemChoice:n,itemSelectable:o,selectedState:r,itemDisabled:a,placeholder:l}=e,{id:h,value:c,label:d,groupId:u,elementId:m,disabled:p,selected:f,placeholder:v}=t;const g=Object.assign(document.createElement("div"),{id:m,innerHTML:d,className:`${s} ${n}`});return f&&g.classList.add(r),v&&g.classList.add(l),g.setAttribute("role",u>0?"treeitem":"option"),Object.assign(g.dataset,{choice:"",id:h,value:c,selectText:i}),p?(g.classList.add(a),g.dataset.choiceDisabled="",g.setAttribute("aria-disabled","true")):(g.classList.add(o),g.dataset.choiceSelectable=""),g},input(e,t){let{input:i,inputCloned:s}=e;const n=Object.assign(document.createElement("input"),{type:"text",className:`${i} ${s}`,autocomplete:"off",autocapitalize:"off",spellcheck:!1});return n.setAttribute("role","textbox"),n.setAttribute("aria-autocomplete","list"),n.setAttribute("aria-label",t),n},dropdown(e){let{list:t,listDropdown:i}=e;const s=document.createElement("div");return s.classList.add(t,i),s.setAttribute("aria-expanded","false"),s},notice(e,t,i){let{item:s,itemChoice:n,noResults:o,noChoices:r}=e;void 0===i&&(i="");const a=[s,n];return"no-choices"===i?a.push(r):"no-results"===i&&a.push(o),Object.assign(document.createElement("div"),{innerHTML:t,className:a.join(" ")})},option(e){let{label:t,value:i,customProperties:s,active:n,disabled:o}=e;const r=new Option(t,i,!1,n);return s&&(r.dataset.customProperties=s),r.disabled=o,r}};const te=function(e){return void 0===e&&(e=!0),{type:H,active:e}},ie=(e,t)=>({type:U,id:e,highlighted:t}),se=e=>{let{value:t,id:i,active:s,disabled:n}=e;return{type:G,value:t,id:i,active:s,disabled:n}},ne=e=>({type:"SET_IS_LOADING",isLoading:e}),oe="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,re={};class ae{static get defaults(){return Object.preventExtensions({get options(){return re},get templates(){return ee}})}constructor(e,t){void 0===e&&(e="[data-choice]"),void 0===t&&(t={}),this.config=r.a.all([T,ae.defaults.options,t],{arrayMerge:(e,t)=>[...t]});const i=((e,t)=>{const i=Object.keys(e).sort(),s=Object.keys(t).sort();return i.filter(e=>s.indexOf(e)<0)})(this.config,T);i.length&&console.warn("Unknown config option(s) passed",i.join(", "));const s="string"==typeof e?document.querySelector(e):e;if(!(s instanceof HTMLInputElement||s instanceof HTMLSelectElement))throw TypeError("Expected one of the following types text|select-one|select-multiple");if(this._isTextElement="text"===s.type,this._isSelectOneElement="select-one"===s.type,this._isSelectMultipleElement="select-multiple"===s.type,this._isSelectElement=this._isSelectOneElement||this._isSelectMultipleElement,this.config.searchEnabled=this._isSelectMultipleElement||this.config.searchEnabled,["auto","always"].includes(this.config.renderSelectedChoices)||(this.config.renderSelectedChoices="auto"),t.addItemFilter&&"function"!=typeof t.addItemFilter){const e=t.addItemFilter instanceof RegExp?t.addItemFilter:new RegExp(t.addItemFilter);this.config.addItemFilter=e.test.bind(e)}if(this._isTextElement?this.passedElement=new Z({element:s,classNames:this.config.classNames,delimiter:this.config.delimiter}):this.passedElement=new Q({element:s,classNames:this.config.classNames,template:e=>this._templates.option(e)}),this.initialised=!1,this._store=new A,this._initialState={},this._currentState={},this._prevState={},this._currentValue="",this._canSearch=this.config.searchEnabled,this._isScrollingOnIe=!1,this._highlightPosition=0,this._wasTap=!0,this._placeholderValue=this._generatePlaceholderValue(),this._baseId=((e,t)=>{let i=e.id||e.name&&`${e.name}-${_(2)}`||_(4);return i=i.replace(/(:|\.|\[|\]|,)/g,""),i=`${t}-${i}`,i})(this.passedElement.element,"choices-"),this._direction=this.passedElement.dir,!this._direction){const{direction:e}=window.getComputedStyle(this.passedElement.element),{direction:t}=window.getComputedStyle(document.documentElement);e!==t&&(this._direction=e)}if(this._idNames={itemChoice:"item-choice"},this._presetGroups=this.passedElement.optionGroups,this._presetOptions=this.passedElement.options,this._presetChoices=this.config.choices,this._presetItems=this.config.items,this.passedElement.value&&(this._presetItems=this._presetItems.concat(this.passedElement.value.split(this.config.delimiter))),this.passedElement.options&&this.passedElement.options.forEach(e=>{let t=e.getAttribute("data-custom-properties");try{t=JSON.parse(t)}catch(e){}this._presetChoices.push({value:e.value,label:e.innerHTML,selected:e.selected,disabled:e.disabled||e.parentNode.disabled,placeholder:""===e.value||e.hasAttribute("placeholder"),customProperties:t})}),this._render=this._render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onFormReset=this._onFormReset.bind(this),this._onAKey=this._onAKey.bind(this),this._onEnterKey=this._onEnterKey.bind(this),this._onEscapeKey=this._onEscapeKey.bind(this),this._onDirectionKey=this._onDirectionKey.bind(this),this._onDeleteKey=this._onDeleteKey.bind(this),this.passedElement.isActive)return this.config.silent||console.warn("Trying to initialise Choices on element already initialised"),void(this.initialised=!0);this.init()}init(){if(this.initialised)return;this._createTemplates(),this._createElements(),this._createStructure(),this._initialState=C(this._store.state),this._store.subscribe(this._render),this._render(),this._addEventListeners();(!this.config.addItems||this.passedElement.element.hasAttribute("disabled"))&&this.disable(),this.initialised=!0;const{callbackOnInit:e}=this.config;e&&"function"==typeof e&&e.call(this)}destroy(){this.initialised&&(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this.clearStore(),this._isSelectElement&&(this.passedElement.options=this._presetOptions),this._templates=null,this.initialised=!1)}enable(){return this.passedElement.isDisabled&&this.passedElement.enable(),this.containerOuter.isDisabled&&(this._addEventListeners(),this.input.enable(),this.containerOuter.enable()),this}disable(){return this.passedElement.isDisabled||this.passedElement.disable(),this.containerOuter.isDisabled||(this._removeEventListeners(),this.input.disable(),this.containerOuter.disable()),this}highlightItem(e,t){if(void 0===t&&(t=!0),!e)return this;const{id:i,groupId:s=-1,value:n="",label:o=""}=e,r=s>=0?this._store.getGroupById(s):null;return this._store.dispatch(ie(i,!0)),t&&this.passedElement.triggerEvent(K,{id:i,value:n,label:o,groupValue:r&&r.value?r.value:null}),this}unhighlightItem(e){if(!e)return this;const{id:t,groupId:i=-1,value:s="",label:n=""}=e,o=i>=0?this._store.getGroupById(i):null;return this._store.dispatch(ie(t,!1)),this.passedElement.triggerEvent(K,{id:t,value:s,label:n,groupValue:o&&o.value?o.value:null}),this}highlightAll(){return this._store.items.forEach(e=>this.highlightItem(e)),this}unhighlightAll(){return this._store.items.forEach(e=>this.unhighlightItem(e)),this}removeActiveItemsByValue(e){return this._store.activeItems.filter(t=>t.value===e).forEach(e=>this._removeItem(e)),this}removeActiveItems(e){return this._store.activeItems.filter(t=>{let{id:i}=t;return i!==e}).forEach(e=>this._removeItem(e)),this}removeHighlightedItems(e){return void 0===e&&(e=!1),this._store.highlightedActiveItems.forEach(t=>{this._removeItem(t),e&&this._triggerChange(t.value)}),this}showDropdown(e){return this.dropdown.isActive||requestAnimationFrame(()=>{this.dropdown.show(),this.containerOuter.open(this.dropdown.distanceFromTopWindow),!e&&this._canSearch&&this.input.focus(),this.passedElement.triggerEvent(x,{})}),this}hideDropdown(e){return this.dropdown.isActive?(requestAnimationFrame(()=>{this.dropdown.hide(),this.containerOuter.close(),!e&&this._canSearch&&(this.input.removeActiveDescendant(),this.input.blur()),this.passedElement.triggerEvent(D,{})}),this):this}getValue(e){void 0===e&&(e=!1);const t=this._store.activeItems.reduce((t,i)=>{const s=e?i.value:i;return t.push(s),t},[]);return this._isSelectOneElement?t[0]:t}setValue(e){return this.initialised?(e.forEach(e=>this._setChoiceOrItem(e)),this):this}setChoiceByValue(e){if(!this.initialised||this._isTextElement)return this;return(Array.isArray(e)?e:[e]).forEach(e=>this._findAndSelectChoiceByValue(e)),this}setChoices(e,t,i,s){if(void 0===e&&(e=[]),void 0===t&&(t="value"),void 0===i&&(i="label"),void 0===s&&(s=!1),!this.initialised)throw new ReferenceError("setChoices was called on a non-initialized instance of Choices");if(!this._isSelectElement)throw new TypeError("setChoices can't be used with INPUT based Choices");if("string"!=typeof t||!t)throw new TypeError("value parameter must be a name of 'value' field in passed objects");if(s&&this.clearChoices(),"function"==typeof e){const n=e(this);if("function"==typeof Promise&&n instanceof Promise)return new Promise(e=>requestAnimationFrame(e)).then(()=>this._handleLoadingState(!0)).then(()=>n).then(e=>this.setChoices(e,t,i,s)).catch(e=>{this.config.silent||console.error(e)}).then(()=>this._handleLoadingState(!1)).then(()=>this);if(!Array.isArray(n))throw new TypeError(".setChoices first argument function must return either array of choices or Promise, got: "+typeof n);return this.setChoices(n,t,i,!1)}if(!Array.isArray(e))throw new TypeError(".setChoices must be called either with array of choices with a function resulting into Promise of array of choices");return this.containerOuter.removeLoadingState(),this._startLoading(),e.forEach(e=>{e.choices?this._addGroup({id:parseInt(e.id,10)||null,group:e,valueKey:t,labelKey:i}):this._addChoice({value:e[t],label:e[i],isSelected:e.selected,isDisabled:e.disabled,customProperties:e.customProperties,placeholder:e.placeholder})}),this._stopLoading(),this}clearChoices(){return this._store.dispatch({type:V}),this}clearStore(){return this._store.dispatch({type:"CLEAR_ALL"}),this}clearSelection(){return this.removeActiveItems(-1),this._addItem({value:"",label:"Select",placeholder:!0}),this}clearInput(){const e=!this._isSelectOneElement;return this.input.clear(e),!this._isTextElement&&this._canSearch&&(this._isSearching=!1,this._store.dispatch(te(!0))),this}_render(){if(this._store.isLoading())return;this._currentState=this._store.state;const e=this._currentState.choices!==this._prevState.choices||this._currentState.groups!==this._prevState.groups||this._currentState.items!==this._prevState.items,t=this._isSelectElement,i=this._currentState.items!==this._prevState.items;e&&(t&&this._renderChoices(),i&&this._renderItems(),this._prevState=this._currentState)}_renderChoices(){const{activeGroups:e,activeChoices:t}=this._store;let i=document.createDocumentFragment();if(this.choiceList.clear(),this.config.resetScrollPosition&&requestAnimationFrame(()=>this.choiceList.scrollToTop()),e.length>=1&&!this._isSearching){const s=t.filter(e=>!0===e.placeholder&&-1===e.groupId);s.length>=1&&(i=this._createChoicesFragment(s,i)),i=this._createGroupsFragment(e,t,i)}else t.length>=1&&(i=this._createChoicesFragment(t,i));if(i.childNodes&&i.childNodes.length>0){const{activeItems:e}=this._store,t=this._canAddItem(e,this.input.value);t.response?(this.choiceList.append(i),this._highlightChoice()):this.choiceList.append(this._getTemplate("notice",t.notice))}else{let e,t;this._isSearching?(t="function"==typeof this.config.noResultsText?this.config.noResultsText():this.config.noResultsText,e=this._getTemplate("notice",t,"no-results")):(t="function"==typeof this.config.noChoicesText?this.config.noChoicesText():this.config.noChoicesText,e=this._getTemplate("notice",t,"no-choices")),this.choiceList.append(e)}}_renderItems(){const e=this._store.activeItems||[];this.itemList.clear();const t=this._createItemsFragment(e);t.childNodes&&this.itemList.append(t)}_createGroupsFragment(e,t,i){void 0===i&&(i=document.createDocumentFragment());const s=e=>t.filter(t=>this._isSelectOneElement?t.groupId===e.id:t.groupId===e.id&&("always"===this.config.renderSelectedChoices||!t.selected));return this.config.shouldSort&&e.sort(this.config.sorter),e.forEach(e=>{const t=s(e);if(t.length>=1){const s=this._getTemplate("choiceGroup",e);i.appendChild(s),this._createChoicesFragment(t,i,!0)}}),i}_createChoicesFragment(e,t,i){void 0===t&&(t=document.createDocumentFragment()),void 0===i&&(i=!1);const{renderSelectedChoices:s,searchResultLimit:n,renderChoiceLimit:o}=this.config,r=this._isSearching?I:this.config.sorter,a=e=>{if("auto"!==s||(this._isSelectOneElement||!e.selected)){const i=this._getTemplate("choice",e,this.config.itemSelectText);t.appendChild(i)}};let l=e;"auto"!==s||this._isSelectOneElement||(l=e.filter(e=>!e.selected));const{placeholderChoices:h,normalChoices:c}=l.reduce((e,t)=>(t.placeholder?e.placeholderChoices.push(t):e.normalChoices.push(t),e),{placeholderChoices:[],normalChoices:[]});(this.config.shouldSort||this._isSearching)&&c.sort(r);let d=l.length;const u=this._isSelectOneElement?[...h,...c]:c;this._isSearching?d=n:o&&o>0&&!i&&(d=o);for(let e=0;e<d;e+=1)u[e]&&a(u[e]);return t}_createItemsFragment(e,t){void 0===t&&(t=document.createDocumentFragment());const{shouldSortItems:i,sorter:s,removeItemButton:n}=this.config;i&&!this._isSelectOneElement&&e.sort(s),this._isTextElement?this.passedElement.value=e:this.passedElement.options=e;return e.forEach(e=>{const i=this._getTemplate("item",e,n);t.appendChild(i)}),t}_triggerChange(e){null!=e&&this.passedElement.triggerEvent(P,{value:e})}_selectPlaceholderChoice(){const{placeholderChoice:e}=this._store;e&&(this._addItem({value:e.value,label:e.label,choiceId:e.id,groupId:e.groupId,placeholder:e.placeholder}),this._triggerChange(e.value))}_handleButtonAction(e,t){if(!(e&&t&&this.config.removeItems&&this.config.removeItemButton))return;const i=t.parentNode.getAttribute("data-id"),s=e.find(e=>e.id===parseInt(i,10));this._removeItem(s),this._triggerChange(s.value),this._isSelectOneElement&&this._selectPlaceholderChoice()}_handleItemAction(e,t,i){if(void 0===i&&(i=!1),!e||!t||!this.config.removeItems||this._isSelectOneElement)return;const s=t.getAttribute("data-id");e.forEach(e=>{e.id!==parseInt(s,10)||e.highlighted?!i&&e.highlighted&&this.unhighlightItem(e):this.highlightItem(e)}),this.input.focus()}_handleChoiceAction(e,t){if(!e||!t)return;const{id:i}=t.dataset,s=this._store.getChoiceById(i);if(!s)return;const n=e[0]&&e[0].keyCode?e[0].keyCode:null,o=this.dropdown.isActive;if(s.keyCode=n,this.passedElement.triggerEvent(N,{choice:s}),!s.selected&&!s.disabled){this._canAddItem(e,s.value).response&&(this._addItem({value:s.value,label:s.label,choiceId:s.id,groupId:s.groupId,customProperties:s.customProperties,placeholder:s.placeholder,keyCode:s.keyCode}),this._triggerChange(s.value))}this.clearInput(),o&&this._isSelectOneElement&&(this.hideDropdown(!0),this.containerOuter.focus())}_handleBackspace(e){if(!this.config.removeItems||!e)return;const t=e[e.length-1],i=e.some(e=>e.highlighted);this.config.editItems&&!i&&t?(this.input.value=t.value,this.input.setWidth(),this._removeItem(t),this._triggerChange(t.value)):(i||this.highlightItem(t,!1),this.removeHighlightedItems(!0))}_startLoading(){this._store.dispatch(ne(!0))}_stopLoading(){this._store.dispatch(ne(!1))}_handleLoadingState(e){void 0===e&&(e=!0);let t=this.itemList.getChild("."+this.config.classNames.placeholder);e?(this.disable(),this.containerOuter.addLoadingState(),this._isSelectOneElement?t?t.innerHTML=this.config.loadingText:(t=this._getTemplate("placeholder",this.config.loadingText),this.itemList.append(t)):this.input.placeholder=this.config.loadingText):(this.enable(),this.containerOuter.removeLoadingState(),this._isSelectOneElement?t.innerHTML=this._placeholderValue||"":this.input.placeholder=this._placeholderValue||"")}_handleSearch(e){if(!e||!this.input.isFocussed)return;const{choices:t}=this._store,{searchFloor:i,searchChoices:s}=this.config,n=t.some(e=>!e.active);if(e&&e.length>=i){const t=s?this._searchChoices(e):0;this.passedElement.triggerEvent(M,{value:e,resultCount:t})}else n&&(this._isSearching=!1,this._store.dispatch(te(!0)))}_canAddItem(e,t){let i=!0,s="function"==typeof this.config.addItemText?this.config.addItemText(t):this.config.addItemText;if(!this._isSelectOneElement){const n=function(e,t,i){return void 0===i&&(i="value"),e.some(e=>"string"==typeof t?e[i]===t.trim():e[i]===t)}(e,t);this.config.maxItemCount>0&&this.config.maxItemCount<=e.length&&(i=!1,s="function"==typeof this.config.maxItemText?this.config.maxItemText(this.config.maxItemCount):this.config.maxItemText),!this.config.duplicateItemsAllowed&&n&&i&&(i=!1,s="function"==typeof this.config.uniqueItemText?this.config.uniqueItemText(t):this.config.uniqueItemText),this._isTextElement&&this.config.addItems&&i&&"function"==typeof this.config.addItemFilter&&!this.config.addItemFilter(t)&&(i=!1,s="function"==typeof this.config.customAddItemText?this.config.customAddItemText(t):this.config.customAddItemText)}return{response:i,notice:s}}_searchChoices(e){const t="string"==typeof e?e.trim():e,i="string"==typeof this._currentValue?this._currentValue.trim():this._currentValue;if(t.length<1&&t===i+" ")return 0;const s=this._store.searchableChoices,o=t,r=[...this.config.searchFields],a=Object.assign(this.config.fuseOptions,{keys:r}),l=new n.a(s,a).search(o);return this._currentValue=t,this._highlightPosition=0,this._isSearching=!0,this._store.dispatch((e=>({type:R,results:e}))(l)),l.length}_addEventListeners(){const{documentElement:e}=document;e.addEventListener("touchend",this._onTouchEnd,!0),this.containerOuter.element.addEventListener("keydown",this._onKeyDown,!0),this.containerOuter.element.addEventListener("mousedown",this._onMouseDown,!0),e.addEventListener("click",this._onClick,{passive:!0}),e.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.dropdown.element.addEventListener("mouseover",this._onMouseOver,{passive:!0}),this._isSelectOneElement&&(this.containerOuter.element.addEventListener("focus",this._onFocus,{passive:!0}),this.containerOuter.element.addEventListener("blur",this._onBlur,{passive:!0})),this.input.element.addEventListener("keyup",this._onKeyUp,{passive:!0}),this.input.element.addEventListener("focus",this._onFocus,{passive:!0}),this.input.element.addEventListener("blur",this._onBlur,{passive:!0}),this.input.element.form&&this.input.element.form.addEventListener("reset",this._onFormReset,{passive:!0}),this.input.addEventListeners()}_removeEventListeners(){const{documentElement:e}=document;e.removeEventListener("touchend",this._onTouchEnd,!0),this.containerOuter.element.removeEventListener("keydown",this._onKeyDown,!0),this.containerOuter.element.removeEventListener("mousedown",this._onMouseDown,!0),e.removeEventListener("click",this._onClick),e.removeEventListener("touchmove",this._onTouchMove),this.dropdown.element.removeEventListener("mouseover",this._onMouseOver),this._isSelectOneElement&&(this.containerOuter.element.removeEventListener("focus",this._onFocus),this.containerOuter.element.removeEventListener("blur",this._onBlur)),this.input.element.removeEventListener("keyup",this._onKeyUp),this.input.element.removeEventListener("focus",this._onFocus),this.input.element.removeEventListener("blur",this._onBlur),this.input.element.form&&this.input.element.form.removeEventListener("reset",this._onFormReset),this.input.removeEventListeners()}_onKeyDown(e){const{target:t,keyCode:i,ctrlKey:s,metaKey:n}=e,{activeItems:o}=this._store,r=this.input.isFocussed,a=this.dropdown.isActive,l=this.itemList.hasChildren(),h=String.fromCharCode(i),{BACK_KEY:c,DELETE_KEY:d,ENTER_KEY:u,A_KEY:m,ESC_KEY:p,UP_KEY:f,DOWN_KEY:v,PAGE_UP_KEY:g,PAGE_DOWN_KEY:_}=$,b=s||n;!this._isTextElement&&/[a-zA-Z0-9-_ ]/.test(h)&&this.showDropdown();const y={[m]:this._onAKey,[u]:this._onEnterKey,[p]:this._onEscapeKey,[f]:this._onDirectionKey,[g]:this._onDirectionKey,[v]:this._onDirectionKey,[_]:this._onDirectionKey,[d]:this._onDeleteKey,[c]:this._onDeleteKey};y[i]&&y[i]({event:e,target:t,keyCode:i,metaKey:n,activeItems:o,hasFocusedInput:r,hasActiveDropdown:a,hasItems:l,hasCtrlDownKeyPressed:b})}_onKeyUp(e){let{target:t,keyCode:i}=e;const{value:s}=this.input,{activeItems:n}=this._store,o=this._canAddItem(n,s),{BACK_KEY:r,DELETE_KEY:a}=$;if(this._isTextElement){if(o.notice&&s){const e=this._getTemplate("notice",o.notice);this.dropdown.element.innerHTML=e.outerHTML,this.showDropdown(!0)}else this.hideDropdown(!0)}else{const e=(i===r||i===a)&&!t.value,s=!this._isTextElement&&this._isSearching,n=this._canSearch&&o.response;e&&s?(this._isSearching=!1,this._store.dispatch(te(!0))):n&&this._handleSearch(this.input.value)}this._canSearch=this.config.searchEnabled}_onAKey(e){let{hasItems:t,hasCtrlDownKeyPressed:i}=e;if(i&&t){this._canSearch=!1;this.config.removeItems&&!this.input.value&&this.input.element===document.activeElement&&this.highlightAll()}}_onEnterKey(e){let{event:t,target:i,activeItems:s,hasActiveDropdown:n}=e;const{ENTER_KEY:o}=$,r=i.hasAttribute("data-button");if(this._isTextElement&&i.value){const{value:e}=this.input;this._canAddItem(s,e).response&&(this.hideDropdown(!0),this._addItem({value:e}),this._triggerChange(e),this.clearInput())}if(r&&(this._handleButtonAction(s,i),t.preventDefault()),n){const e=this.dropdown.getChild("."+this.config.classNames.highlightedState);e&&(s[0]&&(s[0].keyCode=o),this._handleChoiceAction(s,e)),t.preventDefault()}else this._isSelectOneElement&&(this.showDropdown(),t.preventDefault())}_onEscapeKey(e){let{hasActiveDropdown:t}=e;t&&(this.hideDropdown(!0),this.containerOuter.focus())}_onDirectionKey(e){let{event:t,hasActiveDropdown:i,keyCode:s,metaKey:n}=e;const{DOWN_KEY:o,PAGE_UP_KEY:r,PAGE_DOWN_KEY:a}=$;if(i||this._isSelectOneElement){this.showDropdown(),this._canSearch=!1;const e=s===o||s===a?1:-1,i="[data-choice-selectable]";let l;if(n||s===a||s===r)l=e>0?this.dropdown.element.querySelector(i+":last-of-type"):this.dropdown.element.querySelector(i);else{const t=this.dropdown.element.querySelector("."+this.config.classNames.highlightedState);l=t?function(e,t,i){if(void 0===i&&(i=1),!(e instanceof Element)||"string"!=typeof t)return;const s=(i>0?"next":"previous")+"ElementSibling";let n=e[s];for(;n;){if(n.matches(t))return n;n=n[s]}return n}(t,i,e):this.dropdown.element.querySelector(i)}l&&(function(e,t,i){if(void 0===i&&(i=1),!e)return!1;let s;return s=i>0?t.scrollTop+t.offsetHeight>=e.offsetTop+e.offsetHeight:e.offsetTop>=t.scrollTop,s}(l,this.choiceList.element,e)||this.choiceList.scrollToChildElement(l,e),this._highlightChoice(l)),t.preventDefault()}}_onDeleteKey(e){let{event:t,target:i,hasFocusedInput:s,activeItems:n}=e;!s||i.value||this._isSelectOneElement||(this._handleBackspace(n),t.preventDefault())}_onTouchMove(){this._wasTap&&(this._wasTap=!1)}_onTouchEnd(e){const{target:t}=e||e.touches[0];if(this._wasTap&&this.containerOuter.element.contains(t)){(t===this.containerOuter.element||t===this.containerInner.element)&&(this._isTextElement?this.input.focus():this._isSelectMultipleElement&&this.showDropdown()),e.stopPropagation()}this._wasTap=!0}_onMouseDown(e){const{target:t}=e;if(!(t instanceof HTMLElement))return;if(oe&&this.choiceList.element.contains(t)){const t=this.choiceList.element.firstElementChild,i="ltr"===this._direction?e.offsetX>=t.offsetWidth:e.offsetX<t.offsetLeft;this._isScrollingOnIe=i}if(t===this.input.element)return;const i=t.closest("[data-button],[data-item],[data-choice]");if(i instanceof HTMLElement){const t=e.shiftKey,{activeItems:s}=this._store,{dataset:n}=i;"button"in n?this._handleButtonAction(s,i):"item"in n?this._handleItemAction(s,i,t):"choice"in n&&this._handleChoiceAction(s,i)}e.preventDefault()}_onMouseOver(e){let{target:t}=e;t instanceof HTMLElement&&"choice"in t.dataset&&this._highlightChoice(t)}_onClick(e){let{target:t}=e;if(this.containerOuter.element.contains(t))this.dropdown.isActive||this.containerOuter.isDisabled?this._isSelectOneElement&&t!==this.input.element&&!this.dropdown.element.contains(t)&&this.hideDropdown():this._isTextElement?document.activeElement!==this.input.element&&this.input.focus():(this.showDropdown(),this.containerOuter.focus());else{this._store.highlightedActiveItems.length>0&&this.unhighlightAll(),this.containerOuter.removeFocusState(),this.hideDropdown(!0)}}_onFocus(e){let{target:t}=e;if(!this.containerOuter.element.contains(t))return;({text:()=>{t===this.input.element&&this.containerOuter.addFocusState()},"select-one":()=>{this.containerOuter.addFocusState(),t===this.input.element&&this.showDropdown(!0)},"select-multiple":()=>{t===this.input.element&&(this.showDropdown(!0),this.containerOuter.addFocusState())}})[this.passedElement.element.type]()}_onBlur(e){let{target:t}=e;if(this.containerOuter.element.contains(t)&&!this._isScrollingOnIe){const{activeItems:e}=this._store,i=e.some(e=>e.highlighted);({text:()=>{t===this.input.element&&(this.containerOuter.removeFocusState(),i&&this.unhighlightAll(),this.hideDropdown(!0))},"select-one":()=>{this.containerOuter.removeFocusState(),(t===this.input.element||t===this.containerOuter.element&&!this._canSearch)&&this.hideDropdown(!0)},"select-multiple":()=>{t===this.input.element&&(this.containerOuter.removeFocusState(),this.hideDropdown(!0),i&&this.unhighlightAll())}})[this.passedElement.element.type]()}else this._isScrollingOnIe=!1,this.input.element.focus()}_onFormReset(){this._store.dispatch({type:"RESET_TO",state:this._initialState})}_highlightChoice(e){void 0===e&&(e=null);const t=Array.from(this.dropdown.element.querySelectorAll("[data-choice-selectable]"));if(!t.length)return;let i=e;Array.from(this.dropdown.element.querySelectorAll("."+this.config.classNames.highlightedState)).forEach(e=>{e.classList.remove(this.config.classNames.highlightedState),e.setAttribute("aria-selected","false")}),i?this._highlightPosition=t.indexOf(i):(i=t.length>this._highlightPosition?t[this._highlightPosition]:t[t.length-1],i||(i=t[0])),i.classList.add(this.config.classNames.highlightedState),i.setAttribute("aria-selected","true"),this.passedElement.triggerEvent(j,{el:i}),this.dropdown.isActive&&(this.input.setActiveDescendant(i.id),this.containerOuter.setActiveDescendant(i.id))}_addItem(e){let{value:t,label:i=null,choiceId:s=-1,groupId:n=-1,customProperties:o=null,placeholder:r=!1,keyCode:a=null}=e,l="string"==typeof t?t.trim():t;const h=a,c=o,{items:d}=this._store,u=i||l,m=s||-1,p=n>=0?this._store.getGroupById(n):null,f=d?d.length+1:1;return this.config.prependValue&&(l=this.config.prependValue+l.toString()),this.config.appendValue&&(l+=this.config.appendValue.toString()),this._store.dispatch((e=>{let{value:t,label:i,id:s,choiceId:n,groupId:o,customProperties:r,placeholder:a,keyCode:l}=e;return{type:Y,value:t,label:i,id:s,choiceId:n,groupId:o,customProperties:r,placeholder:a,keyCode:l}})({value:l,label:u,id:f,choiceId:m,groupId:n,customProperties:o,placeholder:r,keyCode:h})),this._isSelectOneElement&&this.removeActiveItems(f),this.passedElement.triggerEvent(k,{id:f,value:l,label:u,customProperties:c,groupValue:p&&p.value?p.value:void 0,keyCode:h}),this}_removeItem(e){if(!e||!y("Object",e))return this;const{id:t,value:i,label:s,choiceId:n,groupId:o}=e,r=o>=0?this._store.getGroupById(o):null;return this._store.dispatch(((e,t)=>({type:q,id:e,choiceId:t}))(t,n)),r&&r.value?this.passedElement.triggerEvent(F,{id:t,value:i,label:s,groupValue:r.value}):this.passedElement.triggerEvent(F,{id:t,value:i,label:s}),this}_addChoice(e){let{value:t,label:i=null,isSelected:s=!1,isDisabled:n=!1,groupId:o=-1,customProperties:r=null,placeholder:a=!1,keyCode:l=null}=e;if(null==t)return;const{choices:h}=this._store,c=i||t,d=h?h.length+1:1,u=`${this._baseId}-${this._idNames.itemChoice}-${d}`;this._store.dispatch((e=>{let{value:t,label:i,id:s,groupId:n,disabled:o,elementId:r,customProperties:a,placeholder:l,keyCode:h}=e;return{type:B,value:t,label:i,id:s,groupId:n,disabled:o,elementId:r,customProperties:a,placeholder:l,keyCode:h}})({id:d,groupId:o,elementId:u,value:t,label:c,disabled:n,customProperties:r,placeholder:a,keyCode:l})),s&&this._addItem({value:t,label:c,choiceId:d,customProperties:r,placeholder:a,keyCode:l})}_addGroup(e){let{group:t,id:i,valueKey:s="value",labelKey:n="label"}=e;const o=y("Object",t)?t.choices:Array.from(t.getElementsByTagName("OPTION")),r=i||Math.floor((new Date).valueOf()*Math.random()),a=!!t.disabled&&t.disabled;if(o){this._store.dispatch(se({value:t.label,id:r,active:!0,disabled:a}));const e=e=>{const t=e.disabled||e.parentNode&&e.parentNode.disabled;this._addChoice({value:e[s],label:y("Object",e)?e[n]:e.innerHTML,isSelected:e.selected,isDisabled:t,groupId:r,customProperties:e.customProperties,placeholder:e.placeholder})};o.forEach(e)}else this._store.dispatch(se({value:t.label,id:t.id,active:!1,disabled:t.disabled}))}_getTemplate(e){if(!e)return null;const{classNames:t}=this.config;for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return this._templates[e].call(this,t,...s)}_createTemplates(){const{callbackOnCreateTemplates:e}=this.config;let t={};e&&"function"==typeof e&&(t=e.call(this,S)),this._templates=r()(ee,t)}_createElements(){this.containerOuter=new W({element:this._getTemplate("containerOuter",this._direction,this._isSelectElement,this._isSelectOneElement,this.config.searchEnabled,this.passedElement.element.type),classNames:this.config.classNames,type:this.passedElement.element.type,position:this.config.position}),this.containerInner=new W({element:this._getTemplate("containerInner"),classNames:this.config.classNames,type:this.passedElement.element.type,position:this.config.position}),this.input=new z({element:this._getTemplate("input",this._placeholderValue),classNames:this.config.classNames,type:this.passedElement.element.type,preventPaste:!this.config.paste}),this.choiceList=new X({element:this._getTemplate("choiceList",this._isSelectOneElement)}),this.itemList=new X({element:this._getTemplate("itemList",this._isSelectOneElement)}),this.dropdown=new L({element:this._getTemplate("dropdown"),classNames:this.config.classNames,type:this.passedElement.element.type})}_createStructure(){this.passedElement.conceal(),this.containerInner.wrap(this.passedElement.element),this.containerOuter.wrap(this.containerInner.element),this._isSelectOneElement?this.input.placeholder=this.config.searchPlaceholderValue||"":this._placeholderValue&&(this.input.placeholder=this._placeholderValue,this.input.setWidth()),this.containerOuter.element.appendChild(this.containerInner.element),this.containerOuter.element.appendChild(this.dropdown.element),this.containerInner.element.appendChild(this.itemList.element),this._isTextElement||this.dropdown.element.appendChild(this.choiceList.element),this._isSelectOneElement?this.config.searchEnabled&&this.dropdown.element.insertBefore(this.input.element,this.dropdown.element.firstChild):this.containerInner.element.appendChild(this.input.element),this._isSelectElement&&(this._highlightPosition=0,this._isSearching=!1,this._startLoading(),this._presetGroups.length?this._addPredefinedGroups(this._presetGroups):this._addPredefinedChoices(this._presetChoices),this._stopLoading()),this._isTextElement&&this._addPredefinedItems(this._presetItems)}_addPredefinedGroups(e){const t=this.passedElement.placeholderOption;t&&"SELECT"===t.parentNode.tagName&&this._addChoice({value:t.value,label:t.innerHTML,isSelected:t.selected,isDisabled:t.disabled,placeholder:!0}),e.forEach(e=>this._addGroup({group:e,id:e.id||null}))}_addPredefinedChoices(e){this.config.shouldSort&&e.sort(this.config.sorter);const t=e.some(e=>e.selected),i=e.findIndex(e=>void 0===e.disabled||!e.disabled);e.forEach((e,s)=>{const{value:n,label:o,customProperties:r,placeholder:a}=e;if(this._isSelectElement)if(e.choices)this._addGroup({group:e,id:e.id||null});else{const l=!!(this._isSelectOneElement&&!t&&s===i)||e.selected,h=e.disabled;this._addChoice({value:n,label:o,isSelected:l,isDisabled:h,customProperties:r,placeholder:a})}else this._addChoice({value:n,label:o,isSelected:e.selected,isDisabled:e.disabled,customProperties:r,placeholder:a})})}_addPredefinedItems(e){e.forEach(e=>{"object"==typeof e&&e.value&&this._addItem({value:e.value,label:e.label,choiceId:e.id,customProperties:e.customProperties,placeholder:e.placeholder}),"string"==typeof e&&this._addItem({value:e})})}_setChoiceOrItem(e){({object:()=>{e.value&&(this._isTextElement?this._addItem({value:e.value,label:e.label,choiceId:e.id,customProperties:e.customProperties,placeholder:e.placeholder}):this._addChoice({value:e.value,label:e.label,isSelected:!0,isDisabled:!1,customProperties:e.customProperties,placeholder:e.placeholder}))},string:()=>{this._isTextElement?this._addItem({value:e}):this._addChoice({value:e,label:e,isSelected:!0,isDisabled:!1})}})[b(e).toLowerCase()]()}_findAndSelectChoiceByValue(e){const{choices:t}=this._store,i=t.find(t=>this.config.valueComparer(t.value,e));i&&!i.selected&&this._addItem({value:i.value,label:i.label,choiceId:i.id,groupId:i.groupId,customProperties:i.customProperties,placeholder:i.placeholder,keyCode:i.keyCode})}_generatePlaceholderValue(){if(this._isSelectElement){const{placeholderOption:e}=this.passedElement;return!!e&&e.text}const{placeholder:e,placeholderValue:t}=this.config,{element:{dataset:i}}=this.passedElement;if(e){if(t)return t;if(i.placeholder)return i.placeholder}return!1}}t.default=ae}]).default;